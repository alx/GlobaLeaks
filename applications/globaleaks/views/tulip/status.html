{{extend 'layout.html'}}

{{if err:}}

<h2>Tulip not found!</h2>

{{else:}}

{{if whistleblower: }}
<h1>4. Whistleblower<span>| TULIP/span></h1>
<p class="intro">
    Welcome back Whistleblower: this TULIP interface is unique for you. 
    If you are using the GlobaLeaks platform with anonymity in mind, be aware that using this page over an inscure channel may lead to the compromise of your identity.</p>

<p>In the future a comment interface will be implemented (<a href="https://blueprints.launchpad.net/globaleaks/+spec/tulip-comments">blueprint</a>). The comments left by you will appear as comming from the Whistleblower. It may be possible that targets could try to identify you, so be sure to not link to any other communication means (email, twitter, facebook, etc.). Be also careful when clicking on external links, as these may lead to the compromise of your identity.</p>

{{else:}}
<h1>3. Target<span>| Tulip</span></h1>
<p class="intro">
This TULIP has been sent to you by an anonymous whistleblower. She/He would like it for you to pay special attention to the information and material contained therein. Please consider that whistleblowers often expose themselves to high personal risks in order to protect the public good. Therefore the material that they provide with this TULIP should be considered of high importance.</p>

{{pass}}
<div class="entry">

    <h2 class="title">{{=leak_title}}</h2>
    
    {{if not whistleblower:}}
    <div class="downloads-left{{if int(tulip_allowed_downloads) != 0 and int(tulip_downloads) >= int(tulip_allowed_downloads): }} full{{pass}}">
        Downloads: <strong>{{=tulip_downloads}}/{{=tulip_allowed_downloads}}</strong>
    </div>
    {{pass}}
    <div class="total-clicks">
        Total clicks: <strong>{{=tulip_accesses}}</strong>
    </div>
    <div class="clear"></div>

    <p class="description">
        In this demo, the Material is an example not submitted by the whistleblower
    </p>
    
    <div class="material">
        <h3>Material</h3>
        <ul>
            <li class="zip">dancemonkeyboy.mpg (3.0 M)</li>
            <li class="pdf">Pentagon-Papers-Index.pdf (1.4 M)</li>
            <li class="img">Tuskegee-syphilis-experiment.gif (172 K)</li>
        </ul>
        {{if not dead and not whistleblower: }}
            {{url = tulip_url}}
            <h3>Download</h3>
            <a href="{{=URL('globaleaks','tulip','download', args=url)}}" class="zip">ZIP</a>
            <a href="{{=URL('globaleaks','tulip','download', args=url)}}" class="crypt notimplemented">Encrypted ZIP</a>
            <a href="{{=URL('globaleaks','tulip','download', args=url)}}" class="crypt notimplemented">PGP Encrypted ZIP</a>
        {{pass}}
        <div class="clear"></div>
        
    </div>
    
    <h2>Target list</h2>
    <table class="targetlist">
        <thead>
            <th>Name</th>
            <th>Description</th>
            <th class="downloads">Clicks</th>
            <th class="downloads">Downloads</th>
        </thead>
        <tbody>
            {{i=0}}
            {{for target in targets: }}
            {{if i % 2 == 1: }}
            <tr class="odd">
            {{else:}}
            <tr class="even">
            {{pass}}
                <td class="name">{{=target.name}}</td>
                <td class="description">{{=target.desc}}</td>
                <td class="downloads">{{=target.tulip_counter}}</td>
                <td class="downloads">{{=target.download_counter}}</td>
            </tr>
            {{pass}}
        </tbody>
    </table>
    
</div>
    <!-- table>
    <tr><td><h2>PGP Security</h2></td></tr>
    <tr id="no_table_Description__row">
    <td class="w2p_fl">
        <label for="PGPKey" id="pgpkey">PGP Key: </label>
    </td>
    <td class="w2p_fw">
        <input onclick="notimpl()" type="file" class="notimplemented" name="pgp_key" >
    </td>
    <td class="w2p_fc"></td>
    </tr>

    <tr id="no_table_Description__row">
    <td class="w2p_fl">
        <label for="TulipEncryption" id="tulip_encryption">Tulip Notification Encryption: </label>
    </td>
    <td class="w2p_fw">
        <input onclick="notimpl()" type="checkbox" class="notimplemented" name="tulip_encryption" >
    </td>
    <td class="w2p_fc"></td>
    </tr>

    <tr id="no_table_Description__row">
    <td class="w2p_fl">
        <label for="MaterialEncryption" id="pgpkey">Material Encryption: </label>
    </td>
    
    <td class="w2p_fw">
        <input onclick="notimpl()" type="checkbox" class="notimplemented" name="material_encryption">
    </td>
    <td class="w2p_fc"></td>
    </tr>

    <tr><td><h2>Password</h2></td></tr>


    <tr id="no_table_Description__row">
    <td class="w2p_fl">
        <label for="Password" id="password">Password: </label>
    </td>
    
    <td class="w2p_fw">
        <input onclick="notimpl()" type="password" class="notimplemented" name="password">
    </td>
    <td class="w2p_fc"></td>
    </tr>

    <tr id="no_table_Description__row">
    <td class="w2p_fl">
        <label for="RestrictAccess" id="restrict_access">Restrict tulip access with my password: </label>
    </td>
    
    <td class="w2p_fw">
        <input onclick="notimpl()" type="checkbox" class="notimplemented" name="restrict_access">
    </td>
    <td class="w2p_fc"></td>
    </tr>


    <tr id="no_table_Description__row">
    <td class="w2p_fl">
        <label for="ZipEncryption" id="zip_encryption">Material zip encryption with my password: </label>
    </td>
    
    <td class="w2p_fw">
        <input onclick="notimpl()" type="checkbox" class="notimplemented" name="zip_encryption">
    </td>
    <td class="w2p_fc"></td>
    </tr>

    
    </table-->

{{pass}}
    <div id="messages">
    </div>
    
    <script type="text/javascript">
    function notimpl() {
        jQuery("#messages").html("NOT IMPLEMENTED!");
    }
    </script>
