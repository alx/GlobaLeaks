{{extend 'layout.html'}}
<center>
<h2 class="entry">Globa<u>List</u>: Node info, Receivers, Groups, Tulips & Bouquet<br><br>
This interface is useful in developing and is <u>enable only in debug mode</u>...<br><br>
change your loglevel inside globaleaks.conf before start a production GlobaLeaks node.</h2>
</center>

<div class="intro">
{{if active:}}
Active Receivers, add them thru the <a href="targets/">insertion interface</a>.<br>
<!-- this link is provided because this page could works as index for all node maintainer's features -->
<table class="targetlist">
    <tr class="even">
        <td class="name">id</td>
        <td class="name">name</td>
        <td class="description">description</td>
        <td class="description">contact type</td>
        <td class="description">delete cap</td>
        <td class="description">contact</td>
    </tr>
    {{i=0}}
    {{for target in active:}}
        {{i+=1}}
        {{if i % 2 == 1: }}
        <tr class="odd">
        {{else:}}
        <tr class="even">
        {{pass}}
    <td class="name">{{=target.id}}</td>
    <td class="name">{{=target.name}}</td>
    <td class="description">{{=target.desc}}</td>
    <td class="description">{{=target.contact_type}}</td>
    <td class="description">{{=target.delete_cap}}</td>
    <td class="description">{{=target.contact}}</td>
    </tr>
    {{pass}}
</table>
{{else:}}
    No target configured in this node, add them thru the <a href="targets/">insertion interface</a>.
{{pass}}
</div>

<div class="intro">
The <b>Boquets</b> follows below: how the submission are spreaded between the receiver:<br>
{{if flowers:}}
<table class="targetlist">
    <tr class="even">
        <td class="name">title</td>
        <td class="name">subm #id</td>
        <!-- has no sense that is always 0, it's a field to delete -->
        <td class="description">Submission date</td>
        <td class="description">whistleblower accesses</td>
        <td class="description">spooled</td>
    </tr>
    {{i=0}}
    {{for leak in flowers:}}
        {{i+=1}}
        {{if i % 2 == 1: }}
            <tr class="odd">
        {{else:}}
            <tr class="even">
        {{pass}}
        <td class="name">{{=leak.title}}</td>
        <td class="name">#{{=leak.leaker_id}}</td>
        <td class="description">{{=leak.submission_timestamp}}</td>
        <td class="description">{{=leak.whistleblower_access}}</td>
        <td class="description">{{=leak.spooled}}</td>
    </tr>
    {{pass}}
</table>

{{else:}}
No submission are present
<!-- yep, text need to be reviewed -->
{{pass}}
</div>

<div class="intro">
The <b>Context</b> your node is capable to handle; added by <a href="/globaleaks/admin/targetgroups">Groups ajax interface</a>. or <a href="/globaleaks/admin/targets">Groups form interface</a>.<br>
{{if groups:}}
<table class="targetlist">
    <tr class="even">
        <td class="name">Group Name</td>
        <td class="name">id</td>
        <td class="description">tags</td>
    </tr>
    {{i=0}}
    {{for single in groups:}}
        {{i+=1}}
        {{if i % 2 == 1: }}
            <tr class="odd">
        {{else:}}
            <tr class="even">
        {{pass}}
        <td class="name">{{=single.name}}</td>
        <td class="name">{{=single.id}}</td>
        <td class="description"><a href="/globaleaks/admin/targetgroups" title="targets ID:{{=single.targets}}">{{=single.tags}}</a></td>
    </tr>
    {{pass}}
</table>

{{else:}}
No <a href="/globaleaks/admin/target">receiver group</a>, are present. neither a default group configured in <b>globaleaks.conf</b>.
<!-- yep, text need to be reviewed -->
{{pass}}
</div>

<div class="intro">
The <b>Tulips</b>, list of the entire list of <i>active</i> tulip in your node.
{{if tulips:}}
<table class="targetlist">
    <tr class="even">
        <td class="name">URL</td>
        <td class="name">subm ID</td>
        <td class="description">target id</td>
        <td class="name">access done/allow</td>
        <td class="name">vote</td>
        <td class="name">downld done/allow</td>
        <td class="name">feedbacks</td>
    </tr>
    {{i=0}}
    {{for tulip in tulips:}}
        {{i+=1}}
        {{if i % 2 == 1: }}
            <tr class="odd">
        {{else:}}
            <tr class="even">
        {{pass}}
        <td class="name"><a href="/globaleaks/tulip/status/{{=tulip.url}}">{{=tulip.url[:10]}}</a></td>
        <td class="name">{{=tulip.leak_id}}</td>
        <td class="description">{{=tulip.target_id}}</td>
        <td class="description">{{=tulip.accesses_counter}}/{{=tulip.allowed_accesses}}</td>
        <td class="description">{{=tulip.express_vote}}</td>
        <td class="description">{{=tulip.downloads_counter}}/{{=tulip.allowed_downloads}}</td>
        <td class="description">{{=tulip.feedbacks_provided}}</td>
    </tr>
    {{pass}}
</table>

{{else:}}
No <b>Tulip are present!</b>
{{pass}}
</div>
